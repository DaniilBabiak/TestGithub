<div *ngIf="challenge" class="container" style="margin-top: 70px;">
  <div class="row">
    <div class="col-sm-8 offset-sm-2">
      <form name="form" (ngSubmit)="f.form.valid && save()" #f="ngForm" novalidate>
        <div class="form-group">
          <div *ngIf="challenge.id !=null">
            <label for="id">ID: </label>
            <span for="id"> {{challenge.id}}</span>
          </div>
          <label for="challengeName">Challenge name</label>
          <input type="text" class="form-control" name="challengeName" placeholder="Enter challenge name"
            [(ngModel)]="challenge.name" required #challengeName="ngModel" />
          <div class="alert alert-danger" role="alert" *ngIf="challengeName.errors && f.submitted">
            Challenge name is required!
          </div>
          <label for="description">Description</label>
          <textarea type="description" class="form-control" placeholder="Enter description of challenge"
            name="description" [(ngModel)]="challenge.description" required #description="ngModel"></textarea>
          <div class="alert alert-danger" role="alert" *ngIf="description.errors && f.submitted">
            Description is required!
          </div>
          <label for="reward">Challenge reward</label>
          <input [(ngModel)]="challenge.reward" type="number" name="reward" class="form-control" id="reward"
            aria-describedby="rewardHelp" placeholder="Enter challenge reward">
          <label for="type">Challenge type</label>
          <br>
          <div ngbDropdown class="d-inline-block">
            <button type="button" class="btn btn-outline-primary" ngbDropdownToggle>{{challenge.typeName}}</button>
            <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
              <div *ngFor="let type of challengeTypes">
                <button type="button" class="btn btn-outline-primary" (click)="changeType(type)" ngbDropdownItem>{{type.name}}</button>
              </div>
            </div>
          </div>
          <br>
          <label for="date">Challenge date</label>
          <br>
          <ngb-datepicker #dp (dateSelect)="onDateSelection($event)" [displayMonths]="2" [dayTemplate]="t"
            outsideDays="hidden">
          </ngb-datepicker>
          <ng-template #t let-date let-focused="focused">
            <span class="custom-day" [class.focused]="focused" [class.range]="isRange(date)"
              [class.faded]="isHovered(date) || isInside(date)" (mouseenter)="hoveredDate = date"
              (mouseleave)="hoveredDate = null">
              {{ date.day }}
            </span>
          </ng-template>
          <br>
          <label for="status">Challenge Status</label>
          <br>
          <div class="btn-group btn-group-toggle" ngbRadioGroup name="radioBasic" [(ngModel)]="challenge.status">
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="Enabled"> Enabled
            </label>
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="Disabled"> Disabled
            </label>
          </div>
          <br>
          <div *ngIf="isImageExists">
            <img [src]="createImgPath(challenge.imagePath)" alt="challenge picture">
          </div>
          <br>
          <app-file-upload [folderName]="folderName" (changeImagePath)="imgPathChanged($event)"></app-file-upload>
          <button type="button" class="btn btn-primary btn-primary_footer" (click)="goBack()">go back</button>
          <button class="btn btn-primary btn-primary_footer">save</button>
        </div>
      </form>
      <p *ngFor="let alert of alerts">
        <ngb-alert [type]="alert.type" (closed)="closeAlert(alert)">{{ alert.message }}</ngb-alert>
    </div>
  </div>
</div>